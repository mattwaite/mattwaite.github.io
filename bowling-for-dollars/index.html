<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Atari Bowling - Sideways</title>
    <style>
        /* General page setup */
        body {
            background-color: #333;
            color: #fff;
            font-family: 'Courier New', Courier, monospace;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100vh;
            margin: 0;
            overflow: hidden;
        }

        /* The main game window - UPDATED to horizontal */
        #game-container {
            width: 480px;
            height: 320px;
            background-color: #A0522D; /* Atari brown background */
            position: relative;
            overflow: hidden;
            border: 2px solid #000;
            transform: scale(1.5); /* Scale up the game */
            image-rendering: pixelated;
            image-rendering: -moz-crisp-edges;
            image-rendering: crisp-edges;
        }

        /* The blue lines defining the lane - UPDATED to vertical */
        .lane-line {
            position: absolute;
            width: 4px; /* Now vertical */
            height: 100%;
            top: 0;
            background-color: #0000AA; /* Atari blue */
        }
        #line-top {
            /* Was top: 150px. New 480 - 150 = 330 */
            left: 330px; 
        }
        #line-bottom {
            /* Was bottom: 60px. New left: 60px */
            left: 60px; 
        }

        /* The player's bowler - UPDATED position */
        #bowler {
            position: absolute;
            width: 24px; 
            height: 32px;
            left: 20px; /* Start on the left */
            top: 144px; /* Start in the middle vertically */
            background-image: url('image_3df0c5.jpg'); 
            background-size: cover;
            background-position: center;
            background-repeat: no-repeat;
        }

        /* The bowling ball - UPDATED position */
        #ball {
            position: absolute;
            width: 10px;
            height: 10px;
            background-color: #0000AA; /* Blue ball */
            border-radius: 50%;
            left: 70px; /* Start in front of bowler */
            top: 155px;
            display: none; /* Hidden until thrown */
        }

        /* A single bowling pin - UPDATED dimensions */
        .pin {
            position: absolute;
            width: 8px; /* Rotated dollar bill */
            height: 16px; 
            background-color: #008000; /* Green for dollar bill */
            border: 1px solid #004000; /* Darker green border */
            box-sizing: border-box; 
        }

        /* The scoreboard display - No change */
        #scoreboard {
            position: absolute;
            top: 10px;
            right: 10px;
            font-size: 24px;
            color: #00F000; /* Green score */
            letter-spacing: 4px;
        }

        /* Instructions text outside the game - UPDATED */
        #controls {
            margin-top: 60px; /* Account for game scaling */
            text-align: center;
        }
    </style>
</head>
<body>

    <div id="game-container">
        <div class="lane-line" id="line-top"></div>
        <div class="lane-line" id="line-bottom"></div>
        
        <div id="scoreboard">00</div>

        <div id="ball"></div>
        <div id="bowler"></div>
    </div>

    <div id="controls">
        <p>Use <strong>ArrowUp / ArrowDown</strong> to move bowler.</p>
        <p>Press <strong>Space</strong> to roll.</p>
        <p>Use <strong>ArrowUp / ArrowDown</strong> while ball is rolling to "hook".</p>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // Get all game elements
            const gameContainer = document.getElementById('game-container');
            const bowler = document.getElementById('bowler');
            const ball = document.getElementById('ball');
            const scoreboard = document.getElementById('scoreboard');

            // Game constants - UPDATED for horizontal layout
            const LANE_WIDTH = 480;
            const LANE_HEIGHT = 320;
            const BOWLER_WIDTH = 24;
            const BOWLER_HEIGHT = 32;
            const BALL_WIDTH = 10;
            const BALL_HEIGHT = 10;
            const PIN_WIDTH = 8;
            const PIN_HEIGHT = 16;
            
            const GUTTER_TOP = 40;  // Top boundary
            const GUTTER_BOTTOM = 280; // Bottom boundary (320 - 40)
            const PIN_AREA_LEFT = 350; // X-coordinate for pins (was PIN_AREA_TOP)
            const PIN_CENTER_Y = 160; // Center of the lane

            // Game state variables - UPDATED
            let bowlerX = 20; // Bowler's left position
            let bowlerY = 144; // Bowler's top position
            let ballX = 0;
            let ballY = 0;
            let ballDx = 5; // Ball's horizontal velocity
            let ballDy = 0; // Ball's vertical "hook" velocity
            
            let rolling = false;
            let score = 0;
            let pins = [];
            let ballCount = 0;
            let frame = 1;

            // Pin layout - UPDATED for horizontal layout
            const pinPositions = [
                { x: PIN_AREA_LEFT + 40, y: PIN_CENTER_Y - (PIN_HEIGHT/2) }, // Pin 1 (front)
                { x: PIN_AREA_LEFT + 30, y: PIN_CENTER_Y - 10 - (PIN_HEIGHT/2) }, // Pin 2
                { x: PIN_AREA_LEFT + 30, y: PIN_CENTER_Y + 10 - (PIN_HEIGHT/2) }, // Pin 3
                { x: PIN_AREA_LEFT + 20, y: PIN_CENTER_Y - 20 - (PIN_HEIGHT/2) }, // Pin 4
                { x: PIN_AREA_LEFT + 20, y: PIN_CENTER_Y - (PIN_HEIGHT/2) },       // Pin 5
                { x: PIN_AREA_LEFT + 20, y: PIN_CENTER_Y + 20 - (PIN_HEIGHT/2) }, // Pin 6
                { x: PIN_AREA_LEFT + 10, y: PIN_CENTER_Y - 30 - (PIN_HEIGHT/2) }, // Pin 7 (back left)
                { x: PIN_AREA_LEFT + 10, y: PIN_CENTER_Y - 10 - (PIN_HEIGHT/2) }, // Pin 8
                { x: PIN_AREA_LEFT + 10, y: PIN_CENTER_Y + 10 - (PIN_HEIGHT/2) }, // Pin 9
                { x: PIN_AREA_LEFT + 10, y: PIN_CENTER_Y + 30 - (PIN_HEIGHT/2) }  // Pin 10 (back right)
            ];

            // --- Game Setup Functions ---

            function createPins() {
                pins.forEach(p => p.element.remove());
                pins = [];

                pinPositions.forEach((pos, index) => {
                    const pinElement = document.createElement('div');
                    pinElement.className = 'pin';
                    pinElement.id = `pin-${index}`;
                    pinElement.style.left = `${pos.x}px`;
                    pinElement.style.top = `${pos.y}px`;
                    gameContainer.appendChild(pinElement);
                    
                    pins.push({
                        element: pinElement,
                        x: pos.x,
                        y: pos.y,
                        width: PIN_WIDTH,
                        height: PIN_HEIGHT,
                        isUp: true 
                    });
                });
            }

            // Reset the bowler - UPDATED
            function resetBowler() {
                bowlerX = 20;
                bowlerY = 144;
                bowler.style.left = `${bowlerX}px`;
                bowler.style.top = `${bowlerY}px`;
                ball.style.display = 'none';
                rolling = false;
                ballDy = 0; // Reset hook
            }

            function resetFrame() {
                createPins();
                resetBowler();
                ballCount = 0;
            }

            function nextBall() {
                resetBowler();
                ballCount++;
                if (ballCount >= 2) {
                    alert(`Frame ${frame} over! Total Pins: ${score}\nResetting for next frame.`);
                    frame++;
                    resetFrame();
                }
            }
            
            // --- Input Handling - UPDATED ---

            document.addEventListener('keydown', (e) => {
                if (rolling) {
                    // --- Ball Hooking Controls ---
                    if (e.key === 'ArrowUp') {
                        ballDy = -1; // Hook up
                    } else if (e.key === 'ArrowDown') {
                        ballDy = 1; // Hook down
                    }
                } else {
                    // --- Bowler Movement Controls ---
                    if (e.key === 'ArrowUp') {
                        bowlerY = Math.max(GUTTER_TOP, bowlerY - 5);
                        bowler.style.top = `${bowlerY}px`;
                    } else if (e.key === 'ArrowDown') {
                        bowlerY = Math.min(GUTTER_BOTTOM - BOWLER_HEIGHT, bowlerY + 5);
                        bowler.style.top = `${bowlerY}px`;
                    } else if (e.key === ' ' || e.key === 'Spacebar') {
                        rollBall();
                    }
                }
            });

            // Stop hooking when the key is released - UPDATED
            document.addEventListener('keyup', (e) => {
                if (rolling) {
                    if (e.key === 'ArrowUp' || e.key === 'ArrowDown') {
                        ballDy = 0;
                    }
                }
            });

            // --- Game Logic ---

            // Roll ball - UPDATED
            function rollBall() {
                if (rolling) return;
                rolling = true;
                
                ballX = parseInt(window.getComputedStyle(ball).left);
                ballY = bowlerY + (BOWLER_HEIGHT / 2) - (BALL_HEIGHT / 2);
                
                ball.style.left = `${ballX}px`;
                ball.style.top = `${ballY}px`;
                ball.style.display = 'block';

                gameLoop();
            }

            // Collision check (AABB) - No change needed
            function checkCollision(a, b) {
                return (
                    a.x < b.x + b.width &&
                    a.x + a.width > b.x &&
                    a.y < b.y + b.height &&
                    a.y + a.height > b.y
                );
            }

            function updateScore(pinsHit) {
                score += pinsHit;
                scoreboard.textContent = String(score).padStart(2, '0');
            }

            // --- Main Game Loop - UPDATED ---
            function gameLoop() {
                if (!rolling) return;

                // 1. Move ball (X is now the primary direction)
                ballX += Math.abs(ballDx); // Move right
                ballY += ballDy; // Apply hook (up/down)

                // 2. Update ball's position in the DOM
                ball.style.left = `${ballX}px`;
                ball.style.top = `${ballY}px`;

                // 3. Check for collision with pins
                let pinsHitThisFrame = 0;
                const ballRect = { x: ballX, y: ballY, width: BALL_WIDTH, height: BALL_HEIGHT };

                pins.forEach(pin => {
                    if (pin.isUp) {
                        const pinRect = { x: pin.x, y: pin.y, width: pin.width, height: pin.height };
                        if (checkCollision(ballRect, pinRect)) {
                            pin.isUp = false; 
                            pin.element.style.display = 'none'; 
                            pinsHitThisFrame++;
                        }
                    }
                });
                
                // 4. Update score
                if (pinsHitThisFrame > 0) {
                    updateScore(pinsHitThisFrame);
                }

                // 5. Check for end of roll (ball goes off-screen to the right)
                if (ballX > LANE_WIDTH) {
                    rolling = false;
                    ball.style.display = 'none';
                    nextBall();
                } else {
                    requestAnimationFrame(gameLoop);
                }
            }

            // --- Initialize Game ---
            resetFrame(); 
        });
    </script>
</body>
</html>